(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c7e13f4c"],{1799:function(e,t,c){"use strict";var a=c("7a23"),o=Object(a["withScopeId"])("data-v-4fd1f20a");Object(a["pushScopeId"])("data-v-4fd1f20a");var r={"aria-label":"Page navigation example"},l={class:"pagination"},d=Object(a["createVNode"])("span",{class:"material-icons"},"navigate_before",-1),n=Object(a["createVNode"])("span",{class:"material-icons"},"navigate_next",-1);Object(a["popScopeId"])();var s=o((function(e,t,c,o,s,i){return Object(a["openBlock"])(),Object(a["createBlock"])("nav",r,[Object(a["createVNode"])("ul",l,[Object(a["createVNode"])("li",{class:["page-item",{disabled:!c.pages.has_pre}]},[Object(a["createVNode"])("a",{class:"page-link px-2 h-100 d-flex align-items-center",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(a["withModifiers"])((function(t){return e.$emit("getProducts",c.pages.current_page-1)}),["prevent"]))},[d])],2),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.pages.total_pages,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:["page-item",{active:t===c.pages.current_page}],key:t},[Object(a["createVNode"])("a",{class:"page-link",href:"#",onClick:Object(a["withModifiers"])((function(c){return e.$emit("getProducts",t)}),["prevent"])},Object(a["toDisplayString"])(t),9,["onClick"])],2)})),128)),Object(a["createVNode"])("li",{class:["page-item",{disabled:!c.pages.has_next}]},[Object(a["createVNode"])("a",{class:"page-link px-2 h-100 d-flex align-items-center",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(t){return e.$emit("getProducts",c.pages.current_page+1)}),["prevent"]))},[n])],2)])])})),i={props:["pages"]};c("f6d3");i.render=s,i.__scopeId="data-v-4fd1f20a";t["a"]=i},5651:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"container"},r={class:"table mt-4"},l=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"購買時間"),Object(a["createVNode"])("th",null,"Email"),Object(a["createVNode"])("th",null,"購買款項"),Object(a["createVNode"])("th",null,"應付金額"),Object(a["createVNode"])("th",null,"是否付款"),Object(a["createVNode"])("th",null,"編輯")])],-1),d={key:0},n={class:"list-unstyled mb-0"},s={class:"text-right"},i={class:"form-check form-switch"},b={class:"form-check-label"},O={key:0,class:"text-success fw-bolder"},u={key:1},p={class:"btn-group"},j={class:"d-flex justify-content-center mt-5"};function m(e,t,c,m,h,V){var N=Object(a["resolveComponent"])("pagination"),g=Object(a["resolveComponent"])("order-modal"),f=Object(a["resolveComponent"])("del-modal"),k=Object(a["resolveComponent"])("Loading");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",o,[Object(a["createVNode"])("table",r,[l,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(h.orders,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(V.getTime(e.create_at)),1),Object(a["createVNode"])("td",null,[e.user?(Object(a["openBlock"])(),Object(a["createBlock"])("span",d,Object(a["toDisplayString"])(e.user.email),1)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("ul",n,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.products,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:e},Object(a["toDisplayString"])(e.product.title)+" 數量： "+Object(a["toDisplayString"])(e.qty),1)})),128))])]),Object(a["createVNode"])("td",s,Object(a["toDisplayString"])(e.total),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",i,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":function(t){return e.is_paid=t}},null,8,["onUpdate:modelValue"]),[[a["vModelCheckbox"],e.is_paid]]),Object(a["createVNode"])("label",b,[e.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",O,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",u,"未付款"))])])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",p,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:Object(a["withModifiers"])((function(t){return V.openModal(e)}),["prevent"])},"檢視",8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:Object(a["withModifiers"])((function(t){return V.openDelModal(e)}),["prevent"])},"刪除",8,["onClick"])])])])})),128))])]),Object(a["createVNode"])("div",j,[Object(a["createVNode"])(N,{pages:h.pages,onGetProducts:V.getOrders},null,8,["pages","onGetProducts"])])]),Object(a["createVNode"])(g,{ref:"modal",order:h.tempOrder,onGetOrders:V.getOrders},null,8,["order","onGetOrders"]),Object(a["createVNode"])(f,{ref:"delmodal",order:h.tempOrder,onGetOrders:V.getOrders},null,8,["order","onGetOrders"]),Object(a["createVNode"])(k,{active:h.isLoading},null,8,["active"])],64)}c("99af"),c("b0c0");var h={class:"modal fade",id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},V={class:"modal-dialog modal-xl",role:"document"},N={class:"modal-content border-0"},g=Object(a["createVNode"])("div",{class:"modal-header bg-primary text-white"},[Object(a["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["createVNode"])("span",null,"訂單細節")]),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"modal-body"},k={class:"row"},v={class:"col-md-4"},y=Object(a["createVNode"])("h3",null,"用戶資料",-1),B={class:"table"},x={key:0},w=Object(a["createVNode"])("th",{style:{width:"100px"}},"姓名",-1),D=Object(a["createVNode"])("th",null,"Email",-1),M=Object(a["createVNode"])("th",null,"電話",-1),S=Object(a["createVNode"])("th",null,"地址",-1),C={class:"col-md-8"},_=Object(a["createVNode"])("h3",null,"訂單細節",-1),L={class:"table"},$=Object(a["createVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),P=Object(a["createVNode"])("th",null,"下單時間",-1),T=Object(a["createVNode"])("th",null,"付款時間",-1),F={key:0},G={key:1},I=Object(a["createVNode"])("th",null,"付款狀態",-1),U={key:0,class:"text-success"},q={key:1,class:"text-muted"},E=Object(a["createVNode"])("th",null,"總金額",-1),J=Object(a["createVNode"])("h3",null,"選購商品",-1),z={class:"table"},A=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr")],-1),H={class:"text-end"},K={class:"d-flex justify-content-end"},Q={class:"form-check"},R={class:"form-check-label",for:"flexCheckDefault"},W={key:0},X={key:1},Y={class:"modal-footer"},Z=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ee(e,t,c,o,r,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",h,[Object(a["createVNode"])("div",V,[Object(a["createVNode"])("div",N,[g,Object(a["createVNode"])("div",f,[Object(a["createVNode"])("div",k,[Object(a["createVNode"])("div",v,[y,Object(a["createVNode"])("table",B,[r.tempOrder.user?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",x,[Object(a["createVNode"])("tr",null,[w,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.user.name),1)]),Object(a["createVNode"])("tr",null,[D,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.user.email),1)]),Object(a["createVNode"])("tr",null,[M,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.user.tel),1)]),Object(a["createVNode"])("tr",null,[S,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.user.address),1)])])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",C,[_,Object(a["createVNode"])("table",L,[Object(a["createVNode"])("tbody",null,[Object(a["createVNode"])("tr",null,[$,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.id),1)]),Object(a["createVNode"])("tr",null,[P,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(l.getTime(r.tempOrder.create_at)),1)]),Object(a["createVNode"])("tr",null,[T,Object(a["createVNode"])("td",null,[r.tempOrder.paid_date?(Object(a["openBlock"])(),Object(a["createBlock"])("span",F,Object(a["toDisplayString"])(l.getTime(r.tempOrder.paid_date)),1)):(Object(a["openBlock"])(),Object(a["createBlock"])("span",G,"未付款或時間不正確"))])]),Object(a["createVNode"])("tr",null,[I,Object(a["createVNode"])("td",null,[r.tempOrder.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("strong",U,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",q,"尚未付款"))])]),Object(a["createVNode"])("tr",null,[E,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.total),1)])])]),J,Object(a["createVNode"])("table",z,[A,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.tempOrder.products,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e},[Object(a["createVNode"])("th",null,Object(a["toDisplayString"])(e.product.title),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.qty)+" / "+Object(a["toDisplayString"])(e.product.unit),1),Object(a["createVNode"])("td",H,Object(a["toDisplayString"])(e.product.final_total),1)])})),128))])]),Object(a["createVNode"])("div",K,[Object(a["createVNode"])("div",Q,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.tempOrder.is_paid=e})},null,512),[[a["vModelCheckbox"],r.tempOrder.is_paid]]),Object(a["createVNode"])("label",R,[r.tempOrder.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",W,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",X,"未付款"))])])])])])]),Object(a["createVNode"])("div",Y,[Z,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(){return l.updateOrder&&l.updateOrder.apply(l,arguments)}),["prevent"]))}," 修改付款狀態 ")])])])],512)}var te=c("5530"),ce=c("7c2b"),ae=c.n(ce),oe={props:["order"],data:function(){return{modal:{},tempOrder:{}}},methods:{getTime:function(e){var t=new Date(1e3*e);return t.toLocaleDateString()},updateOrder:function(){var e=this;this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/admin/order/").concat(this.order.id),{data:Object(te["a"])({},this.tempOrder)}).then((function(t){t.data.success?(console.log("更新成功"),e.hideModal(),e.$emit("getOrders")):alert(t.data.message)})).catch((function(e){console.log(e)}))},openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},watch:{order:function(){this.tempOrder=this.order}},mounted:function(){this.modal=new ae.a(this.$refs.modal)}};oe.render=ee;var re=oe,le={id:"delOrderModal",ref:"delOrderModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delOrderModalLabel","aria-hidden":"true"},de={class:"modal-dialog"},ne={class:"modal-content border-0"},se=Object(a["createVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(a["createVNode"])("h5",{id:"delOrderModalLabel",class:"modal-title"},[Object(a["createVNode"])("span",null,"刪除產品")]),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ie={class:"modal-body"},be=Object(a["createTextVNode"])(" 是否刪除 "),Oe={class:"text-danger"},ue=Object(a["createTextVNode"])(" 商品(刪除後將無法恢復)。 "),pe={class:"modal-footer"},je=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function me(e,t,c,o,r,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",le,[Object(a["createVNode"])("div",de,[Object(a["createVNode"])("div",ne,[se,Object(a["createVNode"])("div",ie,[be,Object(a["createVNode"])("strong",Oe,Object(a["toDisplayString"])(c.order.title),1),ue]),Object(a["createVNode"])("div",pe,[je,Object(a["createVNode"])("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=Object(a["withModifiers"])((function(){return l.delOrder&&l.delOrder.apply(l,arguments)}),["prevent"]))}," 確認刪除 ")])])])],512)}var he={props:["order"],data:function(){return{modal:{}}},methods:{openModal:function(){this.modal.show()},delOrder:function(){var e=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/admin/order/").concat(this.order.id)).then((function(t){t.data.success?(console.log("刪除成功"),e.modal.hide(),e.$emit("getOrders")):console.log(t.data.message)})).catch((function(e){console.log(e)}))}},mounted:function(){this.modal=new ae.a(this.$refs.delOrderModal)}};he.render=me;var Ve=he,Ne=c("1799"),ge=c("9062"),fe=c.n(ge),ke=(c("e40d"),{data:function(){return{orders:{},pages:{},tempOrder:{},isLoading:!1}},components:{orderModal:re,delModal:Ve,pagination:Ne["a"],Loading:fe.a},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/admin/orders?page=").concat(t)).then((function(t){t.data.success?(e.isLoading=!1,e.orders=t.data.orders,e.pages=t.data.pagination):alert(t.data.message)})).catch((function(e){console.log(e)}))},getTime:function(e){var t=new Date(1e3*e);return t.toLocaleDateString()},openModal:function(e){this.tempOrder=e,this.$refs.modal.openModal()},openDelModal:function(e){this.tempOrder=e,this.$refs.delmodal.openModal()}},created:function(){this.getOrders()}});ke.render=m;t["default"]=ke},"56c6":function(e,t,c){},b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,r=Function.prototype,l=r.toString,d=/^\s*function ([^ (]*)/,n="name";a&&!(n in r)&&o(r,n,{configurable:!0,get:function(){try{return l.call(this).match(d)[1]}catch(e){return""}}})},f6d3:function(e,t,c){"use strict";c("56c6")}}]);
//# sourceMappingURL=chunk-c7e13f4c.7818e9b6.js.map