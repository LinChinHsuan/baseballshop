(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43f1d290"],{"0ec3":function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),o=Object(a["withScopeId"])("data-v-4e0962ad");Object(a["pushScopeId"])("data-v-4e0962ad");var n={class:"container mt-2 position-relative"},r={class:"table align-middle mb-4"},s=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"圖片"),Object(a["createVNode"])("th",{class:"ms-2"},"商品名稱"),Object(a["createVNode"])("th",null,"價格"),Object(a["createVNode"])("th",null,"功能")])],-1),l={style:{width:"200px"}},d={class:"h5"},i={class:"table align-middle"},u=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{style:{width:"70px"}}),Object(a["createVNode"])("th",null,"品名"),Object(a["createVNode"])("th",{style:{width:"150px"}},"數量 / 單位"),Object(a["createVNode"])("th",{class:"text-end"},"單價")])],-1),b=Object(a["createVNode"])("span",{class:"material-icons"},"close",-1),p={key:0,class:"text-success"},h={class:"input-group input-group-sm"},m={class:"text-end"},f={key:0},j={key:1,class:"text-success"},O={key:0},v=Object(a["createVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),V={class:"text-end"},g={key:1},N=Object(a["createVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),y={class:"text-end text-success"},k={class:"d-flex justify-content-end"},x={class:"input-group w-25 me-2"},C={class:"my-5 row justify-content-center"},w={class:"mb-3"},B=Object(a["createVNode"])("label",{for:"email",class:"form-label"},"Email",-1),S={class:"mb-3"},P=Object(a["createVNode"])("label",{for:"username",class:"form-label"},"收件人姓名",-1),D={class:"mb-3"},A=Object(a["createVNode"])("label",{for:"phone",class:"form-label"},"收件人電話",-1),M={class:"mb-3"},U=Object(a["createVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),$={class:"mb-3"},q=Object(a["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),T=Object(a["createVNode"])("div",{class:"text-end"},[Object(a["createVNode"])("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1),_={key:0,class:"d-flex justify-content-center position-fixed alertMsg"},F={class:"alert alert-success alert-dismissible fade show mb-0",role:"alert"},I=Object(a["createVNode"])("div",{class:"d-flex align-items-center"},[Object(a["createVNode"])("span",{class:"material-icons me-2"},"done"),Object(a["createVNode"])("span",{class:"mb-0"},"新增訂單成功！")],-1);Object(a["popScopeId"])();var E=o((function(e,t,c,E,L,J){var z=Object(a["resolveComponent"])("Field"),G=Object(a["resolveComponent"])("error-message"),H=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])("div",n,[Object(a["createVNode"])("table",r,[s,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(L.products,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e},[Object(a["createVNode"])("td",l,[Object(a["createVNode"])("div",{style:[{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(e.imageUrl,")")}]},null,4)]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.title),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",d,Object(a["toDisplayString"])(e.price)+"元",1)]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:Object(a["withModifiers"])((function(t){return J.addCart(e.id)}),["prevent"])}," 加到購物車 ",8,["onClick"])])])})),128))])]),Object(a["createVNode"])("table",i,[u,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(L.cart.carts,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e},[Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm rounded-0 p-1 d-flex align-items-center",onClick:Object(a["withModifiers"])((function(t){return J.delCartProduct(e.id)}),["prevent"])},[b],8,["onClick"])]),Object(a["createVNode"])("td",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.product.title)+" ",1),e.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("div",p," 已套用優惠券 ")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",h,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"number","onUpdate:modelValue":function(t){return e.qty=t},onBlur:Object(a["withModifiers"])((function(t){return J.updateCartProduct(e)}),["prevent"])},null,40,["onUpdate:modelValue","onBlur"]),[[a["vModelText"],e.qty,void 0,{number:!0}]]),Object(a["createTextVNode"])(" / "+Object(a["toDisplayString"])(e.product.unit),1)])]),Object(a["createVNode"])("td",m,[e.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("small",j,"折扣價：")):(Object(a["openBlock"])(),Object(a["createBlock"])("small",f,"單價：")),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.final_total),1)])])})),128))]),Object(a["createVNode"])("tfoot",null,[L.cart.total===L.cart.final_total?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",O,[v,Object(a["createVNode"])("td",V,Object(a["toDisplayString"])(L.cart.total),1)])):(Object(a["openBlock"])(),Object(a["createBlock"])("tr",g,[N,Object(a["createVNode"])("td",y,Object(a["toDisplayString"])(L.cart.final_total),1)]))])]),Object(a["createVNode"])("div",k,[Object(a["createVNode"])("div",x,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":t[1]||(t[1]=function(e){return L.coupon=e})},null,512),[[a["vModelText"],L.coupon]]),Object(a["createVNode"])("button",{class:"btn btn-outline-primary",type:"button",id:"button-addon2",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(){return J.useCoupon&&J.useCoupon.apply(J,arguments)}),["prevent"]))}," 套用優惠碼 ")]),Object(a["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[3]||(t[3]=function(){return J.delAllCartProduct&&J.delAllCartProduct.apply(J,arguments)})}," 清空購物車 ")]),Object(a["createVNode"])("div",C,[Object(a["createVNode"])(H,{class:"col-md-6",onSubmit:J.onSubmit},{default:o((function(e){var c=e.errors;return[Object(a["createVNode"])("div",w,[B,Object(a["createVNode"])(z,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":c["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:L.user.email,"onUpdate:modelValue":t[4]||(t[4]=function(e){return L.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(G,{name:"email",class:"invalid-feedback"})]),Object(a["createVNode"])("div",S,[P,Object(a["createVNode"])(z,{id:"username",name:"姓名",type:"text",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入收件人姓名",rules:"required",modelValue:L.user.name,"onUpdate:modelValue":t[5]||(t[5]=function(e){return L.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(G,{name:"姓名",class:"invalid-feedback"})]),Object(a["createVNode"])("div",D,[A,Object(a["createVNode"])(z,{id:"phone",name:"電話",type:"tel",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入收件人電話",rules:J.isPhone,modelValue:L.user.tel,"onUpdate:modelValue":t[6]||(t[6]=function(e){return L.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["createVNode"])(G,{name:"電話",class:"invalid-feedback"})]),Object(a["createVNode"])("div",M,[U,Object(a["createVNode"])(z,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入收件人地址",rules:"required",modelValue:L.user.address,"onUpdate:modelValue":t[7]||(t[7]=function(e){return L.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(G,{name:"地址",class:"invalid-feedback"})]),Object(a["createVNode"])("div",$,[q,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[8]||(t[8]=function(e){return L.message=e})},null,512),[[a["vModelText"],L.message]])]),T]})),_:1},8,["onSubmit"])]),L.alertShow?(Object(a["openBlock"])(),Object(a["createBlock"])("div",_,[Object(a["createVNode"])("div",F,[I,Object(a["createVNode"])("button",{type:"button",class:"btn-close top-50 end-0 translate-middle-y","data-bs-dismiss":"alert","aria-label":"Close",onClick:t[9]||(t[9]=function(e){return L.alertShow=!1})})])])):Object(a["createCommentVNode"])("",!0)])})),L=(c("99af"),{data:function(){return{products:{},cart:{},coupon:"",user:{email:"",name:"",tel:"",address:""},message:"",alertShow:!1}},methods:{getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/admin/products?page=").concat(t)).then((function(t){t.data.success?e.products=t.data.products:alert(t.data.message)})).catch((function(e){console.log(e)}))},addCart:function(e){var t=this;this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/cart"),{data:{product_id:e,qty:1}}).then((function(e){t.isLoading=!1,e.data.success?t.getCart():alert(e.data.message)})).catch((function(e){console.log(e)}))},getCart:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/cart")).then((function(t){t.data.success?e.cart=t.data.data:alert(t.data.message)})).catch((function(e){console.log(e)}))},updateCartProduct:function(e){var t=this;this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/cart/").concat(e.id),{data:{product_id:e.id,qty:e.qty}}).then((function(e){e.data.success?(console.log(e.data.message),t.getCart()):alert(e.data.message)})).catch((function(e){console.log(e)}))},delCartProduct:function(e){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/cart/").concat(e)).then((function(e){e.data.success?(console.log(e.data.message),t.getCart()):alert(e.data.message)})).catch((function(e){console.log(e)}))},delAllCartProduct:function(){var e=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/carts")).then((function(t){t.data.success?(console.log(t.data.message),e.getCart()):alert(t.data.message)})).catch((function(e){console.log(e)}))},useCoupon:function(){var e=this;this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/coupon"),{data:{code:this.coupon}}).then((function(t){t.data.success?(e.getCart(),e.coupon=""):alert(t.data.message)})).catch((function(e){console.log(e)}))},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},onSubmit:function(){var e=this;this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("vuebaseballshop","/order"),{data:{user:this.user,message:this.message}}).then((function(t){t.data.success?(e.user={email:"",name:"",tel:"",address:""},e.message="",e.alertShow=!0,e.getCart()):alert(t.data.message)})).catch((function(e){console.log(e)}))}},created:function(){this.getProducts(),this.getCart()}});c("298b");L.render=E,L.__scopeId="data-v-4e0962ad";t["default"]=L},"0f56":function(e,t,c){},"1dde":function(e,t,c){var a=c("d039"),o=c("b622"),n=c("2d00"),r=o("species");e.exports=function(e){return n>=51||!a((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"298b":function(e,t,c){"use strict";c("0f56")},"65f0":function(e,t,c){var a=c("861d"),o=c("e8b5"),n=c("b622"),r=n("species");e.exports=function(e,t){var c;return o(e)&&(c=e.constructor,"function"!=typeof c||c!==Array&&!o(c.prototype)?a(c)&&(c=c[r],null===c&&(c=void 0)):c=void 0),new(void 0===c?Array:c)(0===t?0:t)}},8418:function(e,t,c){"use strict";var a=c("c04e"),o=c("9bf2"),n=c("5c6c");e.exports=function(e,t,c){var r=a(t);r in e?o.f(e,r,n(0,c)):e[r]=c}},"99af":function(e,t,c){"use strict";var a=c("23e7"),o=c("d039"),n=c("e8b5"),r=c("861d"),s=c("7b0b"),l=c("50c4"),d=c("8418"),i=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),h=b("isConcatSpreadable"),m=9007199254740991,f="Maximum allowed index exceeded",j=p>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),O=u("concat"),v=function(e){if(!r(e))return!1;var t=e[h];return void 0!==t?!!t:n(e)},V=!j||!O;a({target:"Array",proto:!0,forced:V},{concat:function(e){var t,c,a,o,n,r=s(this),u=i(r,0),b=0;for(t=-1,a=arguments.length;t<a;t++)if(n=-1===t?r:arguments[t],v(n)){if(o=l(n.length),b+o>m)throw TypeError(f);for(c=0;c<o;c++,b++)c in n&&d(u,b,n[c])}else{if(b>=m)throw TypeError(f);d(u,b++,n)}return u.length=b,u}})},b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,n=Function.prototype,r=n.toString,s=/^\s*function ([^ (]*)/,l="name";a&&!(l in n)&&o(n,l,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(e){return""}}})},e8b5:function(e,t,c){var a=c("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}}}]);
//# sourceMappingURL=chunk-43f1d290.35fceb97.js.map